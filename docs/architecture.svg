<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 720 520" font-family="Segoe UI, Arial, sans-serif">
  <defs>
    <filter id="shadow" x="-2%" y="-2%" width="104%" height="104%">
      <feDropShadow dx="1" dy="1" stdDeviation="2" flood-opacity="0.15"/>
    </filter>
    <linearGradient id="azureGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#e8f4fd"/>
      <stop offset="100%" style="stop-color:#d0e8f7"/>
    </linearGradient>
    <linearGradient id="vnetGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#f0f7ff"/>
      <stop offset="100%" style="stop-color:#e0eefa"/>
    </linearGradient>
    <linearGradient id="subnetGrad1" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#fff8e1"/>
      <stop offset="100%" style="stop-color:#fff3cd"/>
    </linearGradient>
    <linearGradient id="subnetGrad2" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#e8f5e9"/>
      <stop offset="100%" style="stop-color:#c8e6c9"/>
    </linearGradient>
  </defs>

  <!-- Azure Resource Group -->
  <rect x="30" y="10" width="660" height="340" rx="12" fill="url(#azureGrad)" stroke="#0078d4" stroke-width="2" filter="url(#shadow)"/>
  <text x="50" y="38" font-size="14" font-weight="bold" fill="#0078d4">Azure Resource Group</text>

  <!-- VNet -->
  <rect x="55" y="50" width="610" height="285" rx="10" fill="url(#vnetGrad)" stroke="#005a9e" stroke-width="1.5" stroke-dasharray="6,3"/>
  <text x="75" y="75" font-size="13" font-weight="bold" fill="#005a9e">VNet: 10.0.0.0/16</text>

  <!-- AzureBastionSubnet -->
  <rect x="80" y="90" width="260" height="225" rx="8" fill="url(#subnetGrad1)" stroke="#f0a30a" stroke-width="1.5"/>
  <text x="100" y="115" font-size="12" font-weight="bold" fill="#7a6200">AzureBastionSubnet</text>
  <text x="100" y="132" font-size="11" fill="#7a6200">10.0.0.0/26</text>

  <!-- NSG badge - Bastion -->
  <rect x="95" y="145" width="60" height="22" rx="4" fill="#f0a30a" opacity="0.8"/>
  <text x="100" y="160" font-size="10" fill="#fff" font-weight="bold">NSG</text>

  <!-- Bastion -->
  <rect x="100" y="180" width="220" height="80" rx="8" fill="#fff" stroke="#0078d4" stroke-width="1.5" filter="url(#shadow)"/>
  <rect x="100" y="180" width="220" height="28" rx="8" fill="#0078d4"/>
  <rect x="100" y="195" width="220" height="13" fill="#0078d4"/>
  <text x="210" y="198" font-size="12" font-weight="bold" fill="#fff" text-anchor="middle">Azure Bastion</text>
  <text x="210" y="225" font-size="11" fill="#333" text-anchor="middle">Standard SKU</text>
  <text x="210" y="245" font-size="11" fill="#333" text-anchor="middle">enableTunneling: true</text>

  <!-- Public IP -->
  <rect x="140" y="275" width="140" height="28" rx="6" fill="#e3f2fd" stroke="#0078d4" stroke-width="1"/>
  <text x="210" y="294" font-size="11" fill="#0078d4" text-anchor="middle">Public IP</text>

  <!-- snet-vm Subnet -->
  <rect x="370" y="90" width="275" height="225" rx="8" fill="url(#subnetGrad2)" stroke="#2e7d32" stroke-width="1.5"/>
  <text x="390" y="115" font-size="12" font-weight="bold" fill="#2e7d32">snet-vm</text>
  <text x="390" y="132" font-size="11" fill="#2e7d32">10.0.1.0/24</text>

  <!-- NSG badge - VM -->
  <rect x="385" y="145" width="120" height="22" rx="4" fill="#2e7d32" opacity="0.8"/>
  <text x="390" y="160" font-size="10" fill="#fff" font-weight="bold">NSG (8080 Allow)</text>

  <!-- VM -->
  <rect x="390" y="180" width="235" height="100" rx="8" fill="#fff" stroke="#2e7d32" stroke-width="1.5" filter="url(#shadow)"/>
  <rect x="390" y="180" width="235" height="28" rx="8" fill="#2e7d32"/>
  <rect x="390" y="195" width="235" height="13" fill="#2e7d32"/>
  <text x="507" y="198" font-size="12" font-weight="bold" fill="#fff" text-anchor="middle">Linux VM (Ubuntu 22.04)</text>
  <text x="507" y="225" font-size="11" fill="#333" text-anchor="middle">Private IP のみ</text>
  <text x="507" y="245" font-size="11" fill="#333" text-anchor="middle">Apache2 (httpd) :8080</text>
  <text x="507" y="265" font-size="10" fill="#888" text-anchor="middle">Standard_B2s</text>

  <!-- NIC -->
  <rect x="460" y="290" width="100" height="24" rx="6" fill="#e8f5e9" stroke="#2e7d32" stroke-width="1"/>
  <text x="510" y="307" font-size="10" fill="#2e7d32" text-anchor="middle">NIC (Private)</text>

  <!-- Connection: Bastion to VM -->
  <line x1="320" y1="220" x2="390" y2="220" stroke="#0078d4" stroke-width="2" stroke-dasharray="5,3"/>
  <polygon points="387,215 397,220 387,225" fill="#0078d4"/>
  <text x="355" y="212" font-size="9" fill="#0078d4" text-anchor="middle">SSH/Tunnel</text>

  <!-- Local PC -->
  <rect x="200" y="400" width="320" height="100" rx="10" fill="#fff" stroke="#6c757d" stroke-width="2" filter="url(#shadow)"/>
  <rect x="200" y="400" width="320" height="28" rx="10" fill="#6c757d"/>
  <rect x="200" y="415" width="320" height="13" fill="#6c757d"/>
  <text x="360" y="418" font-size="12" font-weight="bold" fill="#fff" text-anchor="middle">ローカル PC</text>
  <text x="360" y="448" font-size="12" fill="#333" text-anchor="middle">Azure CLI + az login</text>
  <text x="360" y="468" font-size="12" fill="#333" text-anchor="middle">ブラウザ → http://localhost:8080</text>
  <text x="360" y="488" font-size="10" fill="#888" text-anchor="middle">az network bastion tunnel ... --port 8080</text>

  <!-- Connection: Local PC to Bastion -->
  <line x1="300" y1="400" x2="210" y2="315" stroke="#e65100" stroke-width="2.5"/>
  <polygon points="213,320 205,310 218,313" fill="#e65100"/>

  <!-- WebSocket label -->
  <rect x="180" y="355" width="120" height="24" rx="5" fill="#fff3e0" stroke="#e65100" stroke-width="1"/>
  <text x="240" y="372" font-size="10" font-weight="bold" fill="#e65100" text-anchor="middle">WebSocket 接続</text>

  <!-- Legend -->
  <text x="560" y="380" font-size="10" fill="#888">VPN / ExpressRoute 不要</text>
</svg>
