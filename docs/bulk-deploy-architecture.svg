<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 580" font-family="Segoe UI, Arial, sans-serif">
  <defs>
    <filter id="shadow" x="-2%" y="-2%" width="104%" height="104%">
      <feDropShadow dx="1" dy="1" stdDeviation="2" flood-opacity="0.15"/>
    </filter>
    <linearGradient id="hubGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#e8f4fd"/>
      <stop offset="100%" style="stop-color:#cce5f7"/>
    </linearGradient>
    <linearGradient id="spokeGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#e8f5e9"/>
      <stop offset="100%" style="stop-color:#c8e6c9"/>
    </linearGradient>
    <linearGradient id="pcGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#fff"/>
      <stop offset="100%" style="stop-color:#f5f5f5"/>
    </linearGradient>
    <marker id="arrowBlue" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto" fill="#0078d4">
      <polygon points="0 0, 10 3.5, 0 7"/>
    </marker>
    <marker id="arrowOrange" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto" fill="#e65100">
      <polygon points="0 0, 10 3.5, 0 7"/>
    </marker>
  </defs>

  <!-- Hub Resource Group -->
  <rect x="250" y="10" width="400" height="220" rx="12" fill="url(#hubGrad)" stroke="#0078d4" stroke-width="2" filter="url(#shadow)"/>
  <text x="270" y="35" font-size="13" font-weight="bold" fill="#0078d4">Hub Resource Group (rg-hub)</text>

  <!-- Hub VNet -->
  <rect x="270" y="45" width="360" height="170" rx="8" fill="#f0f7ff" stroke="#005a9e" stroke-width="1.5" stroke-dasharray="6,3"/>
  <text x="290" y="68" font-size="12" font-weight="bold" fill="#005a9e">Hub VNet: 10.0.0.0/16</text>

  <!-- AzureBastionSubnet -->
  <rect x="290" y="80" width="320" height="120" rx="6" fill="#fff8e1" stroke="#f0a30a" stroke-width="1.2"/>
  <text x="310" y="100" font-size="11" font-weight="bold" fill="#7a6200">AzureBastionSubnet: 10.0.0.0/26</text>

  <!-- Bastion -->
  <rect x="340" y="110" width="220" height="70" rx="8" fill="#fff" stroke="#0078d4" stroke-width="1.5" filter="url(#shadow)"/>
  <rect x="340" y="110" width="220" height="26" rx="8" fill="#0078d4"/>
  <rect x="340" y="124" width="220" height="12" fill="#0078d4"/>
  <text x="450" y="130" font-size="12" font-weight="bold" fill="#fff" text-anchor="middle">Azure Bastion (Standard)</text>
  <text x="450" y="152" font-size="11" fill="#333" text-anchor="middle">enableTunneling: true</text>
  <text x="450" y="170" font-size="10" fill="#888" text-anchor="middle">Public IP</text>

  <!-- Peering lines from Hub down to Spokes -->
  <line x1="340" y1="230" x2="145" y2="310" stroke="#0078d4" stroke-width="2" stroke-dasharray="6,3" marker-end="url(#arrowBlue)"/>
  <line x1="450" y1="230" x2="450" y2="310" stroke="#0078d4" stroke-width="2" stroke-dasharray="6,3" marker-end="url(#arrowBlue)"/>
  <line x1="560" y1="230" x2="755" y2="310" stroke="#0078d4" stroke-width="2" stroke-dasharray="6,3" marker-end="url(#arrowBlue)"/>

  <!-- Peering labels -->
  <text x="450" y="275" font-size="10" fill="#0078d4" text-anchor="middle" font-weight="bold">VNet Peering</text>

  <!-- Spoke 1 -->
  <rect x="30" y="310" width="230" height="200" rx="10" fill="url(#spokeGrad)" stroke="#2e7d32" stroke-width="1.8" filter="url(#shadow)"/>
  <text x="50" y="335" font-size="12" font-weight="bold" fill="#2e7d32">Spoke 1 (rg-spoke-user001)</text>
  <text x="50" y="353" font-size="10" fill="#2e7d32">VNet: 10.1.0.0/24</text>

  <!-- Spoke 1 VM -->
  <rect x="55" y="365" width="180" height="80" rx="6" fill="#fff" stroke="#2e7d32" stroke-width="1.2" filter="url(#shadow)"/>
  <rect x="55" y="365" width="180" height="22" rx="6" fill="#2e7d32"/>
  <rect x="55" y="377" width="180" height="10" fill="#2e7d32"/>
  <text x="145" y="382" font-size="10" font-weight="bold" fill="#fff" text-anchor="middle">Linux VM (user001)</text>
  <text x="145" y="403" font-size="10" fill="#333" text-anchor="middle">Private IP のみ</text>
  <text x="145" y="418" font-size="10" fill="#333" text-anchor="middle">httpd :8080</text>
  <text x="145" y="435" font-size="9" fill="#888" text-anchor="middle">NSG (8080 Allow)</text>

  <!-- Spoke 1 role badge -->
  <rect x="55" y="455" width="180" height="20" rx="4" fill="#e3f2fd" stroke="#1565c0" stroke-width="0.8"/>
  <text x="145" y="469" font-size="9" fill="#1565c0" text-anchor="middle">user001 = Contributor</text>

  <!-- Spoke 2 -->
  <rect x="335" y="310" width="230" height="200" rx="10" fill="url(#spokeGrad)" stroke="#2e7d32" stroke-width="1.8" filter="url(#shadow)"/>
  <text x="355" y="335" font-size="12" font-weight="bold" fill="#2e7d32">Spoke 2 (rg-spoke-user002)</text>
  <text x="355" y="353" font-size="10" fill="#2e7d32">VNet: 10.2.0.0/24</text>

  <!-- Spoke 2 VM -->
  <rect x="360" y="365" width="180" height="80" rx="6" fill="#fff" stroke="#2e7d32" stroke-width="1.2" filter="url(#shadow)"/>
  <rect x="360" y="365" width="180" height="22" rx="6" fill="#2e7d32"/>
  <rect x="360" y="377" width="180" height="10" fill="#2e7d32"/>
  <text x="450" y="382" font-size="10" font-weight="bold" fill="#fff" text-anchor="middle">Linux VM (user002)</text>
  <text x="450" y="403" font-size="10" fill="#333" text-anchor="middle">Private IP のみ</text>
  <text x="450" y="418" font-size="10" fill="#333" text-anchor="middle">httpd :8080</text>
  <text x="450" y="435" font-size="9" fill="#888" text-anchor="middle">NSG (8080 Allow)</text>

  <!-- Spoke 2 role badge -->
  <rect x="360" y="455" width="180" height="20" rx="4" fill="#e3f2fd" stroke="#1565c0" stroke-width="0.8"/>
  <text x="450" y="469" font-size="9" fill="#1565c0" text-anchor="middle">user002 = Contributor</text>

  <!-- Spoke N -->
  <rect x="640" y="310" width="230" height="200" rx="10" fill="url(#spokeGrad)" stroke="#2e7d32" stroke-width="1.8" filter="url(#shadow)"/>
  <text x="660" y="335" font-size="12" font-weight="bold" fill="#2e7d32">Spoke N (rg-spoke-userN)</text>
  <text x="660" y="353" font-size="10" fill="#2e7d32">VNet: 10.N.0.0/24</text>

  <!-- Spoke N VM -->
  <rect x="665" y="365" width="180" height="80" rx="6" fill="#fff" stroke="#2e7d32" stroke-width="1.2" filter="url(#shadow)"/>
  <rect x="665" y="365" width="180" height="22" rx="6" fill="#2e7d32"/>
  <rect x="665" y="377" width="180" height="10" fill="#2e7d32"/>
  <text x="755" y="382" font-size="10" font-weight="bold" fill="#fff" text-anchor="middle">Linux VM (userN)</text>
  <text x="755" y="403" font-size="10" fill="#333" text-anchor="middle">Private IP のみ</text>
  <text x="755" y="418" font-size="10" fill="#333" text-anchor="middle">httpd :8080</text>
  <text x="755" y="435" font-size="9" fill="#888" text-anchor="middle">NSG (8080 Allow)</text>

  <!-- Spoke N role badge -->
  <rect x="665" y="455" width="180" height="20" rx="4" fill="#e3f2fd" stroke="#1565c0" stroke-width="0.8"/>
  <text x="755" y="469" font-size="9" fill="#1565c0" text-anchor="middle">userN = Contributor</text>

  <!-- Dots between Spoke 2 and Spoke N -->
  <text x="607" y="410" font-size="24" fill="#888" text-anchor="middle">...</text>

  <!-- Local PC -->
  <rect x="30" y="535" width="280" height="40" rx="8" fill="url(#pcGrad)" stroke="#6c757d" stroke-width="1.5" filter="url(#shadow)"/>
  <text x="170" y="560" font-size="11" font-weight="bold" fill="#333" text-anchor="middle">ローカル PC (Azure CLI + az login)</text>

  <!-- Connection: Local PC to Bastion -->
  <line x1="170" y1="535" x2="400" y2="230" stroke="#e65100" stroke-width="2.5" marker-end="url(#arrowOrange)"/>
  <rect x="200" y="480" width="140" height="24" rx="5" fill="#fff3e0" stroke="#e65100" stroke-width="1"/>
  <text x="270" y="496" font-size="10" font-weight="bold" fill="#e65100" text-anchor="middle">WebSocket 接続</text>

  <!-- N = 1〜300 label -->
  <rect x="680" y="530" width="180" height="36" rx="6" fill="#f5f5f5" stroke="#999" stroke-width="1"/>
  <text x="770" y="547" font-size="10" fill="#555" text-anchor="middle">N = 1〜300</text>
  <text x="770" y="561" font-size="10" fill="#555" text-anchor="middle">VPN / ExpressRoute 不要</text>
</svg>
